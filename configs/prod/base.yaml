# GinForge 生产环境基础配置
# 所有服务共用的基础配置

app:
  name: "GinForge Framework"
  version: "1.0.0"
  env: "production"
  debug: false
  port: 8080
  read_timeout: "30s"
  write_timeout: "30s"
  idle_timeout: "120s"

# 日志配置
log:
  level: "info"
  format: "json"
  output: "file"
  file_path: "/var/log/ginforge/app.log"
  max_size: 500
  max_age: 30
  max_backups: 10
  compress: true

# 数据库配置（使用环境变量）
database:
  driver: "mysql"
  host: "${DB_HOST}"
  port: ${DB_PORT}
  database: "${DB_NAME}"
  username: "${DB_USER}"
  password: "${DB_PASSWORD}"
  charset: "utf8mb4"
  timezone: "Asia/Shanghai"
  table_prefix: "gf_"
  max_idle_conns: 20
  max_open_conns: 200
  conn_max_lifetime: "1h"
  log_level: "error"

# Redis配置（使用环境变量）
redis:
  enabled: true
  host: "${REDIS_HOST}"
  port: ${REDIS_PORT}
  password: "${REDIS_PASSWORD}"
  database: 0
  pool_size: 20
  min_idle_conns: 10
  max_retries: 3
  dial_timeout: "5s"
  read_timeout: "3s"
  write_timeout: "3s"
  idle_timeout: "5m"
  idle_check_frequency: "1m"

# 缓存配置
cache:
  default_ttl: "30m"
  max_size: 10000
  cleanup_interval: "30m"

# JWT配置（必须使用环境变量）
jwt:
  secret: "${JWT_SECRET}"
  expire: "24h"
  issuer: "GinForge"
  audience: "GinForge-Users"

# 限流配置
rate_limit:
  enabled: true
  rps: 1000
  burst: 2000
  window: "1m"

# CORS配置
cors:
  enabled: true
  origins: ["https://yourdomain.com"]
  methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
  headers: ["Content-Type", "Authorization", "X-Requested-With"]
  credentials: true
  max_age: "12h"

# 监控配置
monitor:
  enabled: true
  metrics_path: "/metrics"
  health_path: "/healthz"
  ready_path: "/readyz"

# Gateway 配置
gateway:
  base_url: "https://api.yourdomain.com"
  timeout: "60s"
  retry_count: 3
  retry_delay: "1s"

# 外部服务配置
external_services:
  user_api_url: "http://user-api:8081"
  merchant_api_url: "http://merchant-api:8082"
  admin_api_url: "http://admin-api:8083"
  file_api_url: "http://file-api:8086"
  websocket_gateway_url: "ws://websocket-gateway:8087"

# 文件上传配置
upload:
  max_size: 50
  allowed_types: ["image/jpeg", "image/png", "image/gif", "application/pdf"]
  upload_path: "/var/uploads"
  temp_path: "/var/temp"

# 邮件配置
email:
  enabled: true
  smtp_host: "${SMTP_HOST}"
  smtp_port: ${SMTP_PORT}
  smtp_username: "${SMTP_USERNAME}"
  smtp_password: "${SMTP_PASSWORD}"
  from_name: "GinForge"
  from_email: "${SMTP_FROM_EMAIL}"

# 短信配置
sms:
  enabled: true
  provider: "aliyun"
  access_key: "${SMS_ACCESS_KEY}"
  secret_key: "${SMS_SECRET_KEY}"
  sign_name: "GinForge"
  template_code: "${SMS_TEMPLATE_CODE}"

# 通知服务配置（邮件和短信）
notification:
  email:
    host: "${SMTP_HOST}"
    port: ${SMTP_PORT}
    username: "${SMTP_USERNAME}"
    password: "${SMTP_PASSWORD}"
    from: "${SMTP_FROM_EMAIL}"
    from_name: GinForge系统
    timeout: 10
    use_ssl: true
  sms:
    provider: aliyun
    api_key: "${SMS_ACCESS_KEY}"
    api_secret: "${SMS_SECRET_KEY}"
    api_url: ""
    timeout: 5
    sign_name: GinForge
    extra_params:
      region: cn-hangzhou

# 安全配置
security:
  bcrypt_cost: 12
  session_timeout: "24h"
  max_login_attempts: 5
  lockout_duration: "15m"
  password_min_length: 8
  password_require_uppercase: true
  password_require_lowercase: true
  password_require_numbers: true
  password_require_symbols: true

