# 测试环境配置
app:
  env: "test"
  debug: true
  port: 8080
  read_timeout: "10s"
  write_timeout: "10s"
  idle_timeout: "60s"

# 服务端口配置
services:
  user_api:
    port: 8081
  merchant_api:
    port: 8082
  admin_api:
    port: 8083
  gateway:
    port: 8080
  gateway_worker:
    port: 8084
  demo:
    port: 8085

log:
  level: "debug"
  format: "text"
  output: "stdout"
  file_path: "logs/test.log"
  max_size: 10
  max_age: 7
  max_backups: 3
  compress: false

database:
  driver: "sqlite"
  host: "localhost"
  port: 3306
  database: "test.db"
  username: ""
  password: ""
  charset: "utf8mb4"
  timezone: "Asia/Shanghai"
  table_prefix: "gf_"  # 数据表前缀
  max_idle_conns: 5
  max_open_conns: 50
  conn_max_lifetime: "30m"
  log_level: "silent"

redis:
  enabled: false
  host: "localhost"
  port: 6379
  password: ""
  database: 0
  pool_size: 5
  min_idle_conns: 2
  max_retries: 3
  dial_timeout: "5s"
  read_timeout: "3s"
  write_timeout: "3s"
  idle_timeout: "5m"
  idle_check_frequency: "1m"

cache:
  default_ttl: "1m"
  max_size: 100
  cleanup_interval: "5m"

jwt:
  secret: "test-secret"
  expire: "1h"
  issuer: "GinForge-Test"
  audience: "GinForge-Test-Users"

rate_limit:
  enabled: false
  rps: 1000
  burst: 2000
  window: "1m"

cors:
  enabled: true
  origins: ["*"]
  methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
  headers: ["Content-Type", "Authorization", "X-Requested-With"]
  credentials: false
  max_age: "1h"

monitor:
  enabled: false
  metrics_path: "/metrics"
  health_path: "/healthz"
  ready_path: "/readyz"

# 外部服务配置
external_services:
  user_api_url: "http://localhost:8081"
  merchant_api_url: "http://localhost:8082"
  admin_api_url: "http://localhost:8083"

# 微服务配置
microservices:
  user_api:
    name: "user-api"
    port: 8081
    health_path: "/healthz"
    metrics_path: "/metrics"
  merchant_api:
    name: "merchant-api"
    port: 8082
    health_path: "/healthz"
    metrics_path: "/metrics"
  admin_api:
    name: "admin-api"
    port: 8083
    health_path: "/healthz"
    metrics_path: "/metrics"
  gateway:
    name: "gateway"
    port: 8080
    health_path: "/healthz"
    metrics_path: "/metrics"
  gateway_worker:
    name: "gateway-worker"
    port: 8084
    health_path: "/healthz"
    metrics_path: "/metrics"
  demo:
    name: "demo"
    port: 8085
    health_path: "/healthz"
    metrics_path: "/metrics"
